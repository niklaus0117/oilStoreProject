<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.store.clientsoft.customer.dao.CustomerLoginDao">
 	<resultMap id="BaseResultMap" type="com.store.clientsoft.customer.entity.CustomerLogin">
 		<id column="CUSTOMER_ID" jdbcType="INTEGER" property="customerId" />
 		<result column="MOBILE_PHONE" jdbcType="VARCHAR" property="mobilePhone" />
 		<result column="LOGIN_NAME" jdbcType="VARCHAR" property="loginName" />
 		<result column="PASSWORD" jdbcType="VARCHAR" property="password" />
 		<result column="IDENTITY_CARD_NO" jdbcType="VARCHAR" property="identityCardNo" />
 		<result column="USER_STATS" jdbcType="TINYINT" property="userStats" />
 		<result column="MODIFIED_TIME" jdbcType="TIMESTAMP" property="modifiedTime" />
 	</resultMap>
 	
 	<sql id="Base_Column_List">
    	CUSTOMER_ID, MOBILE_PHONE, LOGIN_NAME, PASSWORD, IDENTITY_CARD_NO, USER_STATS, MODIFIED_TIME
  	</sql>
  	<!-- 登录验证 -->
  	<select id="validaCustomerLogin" resultMap="BaseResultMap" parameterType="java.lang.String">
  		SELECT
  		<include refid="Base_Column_List" />
  		FROM CUSTOMER_LOGIN WHERE LOGIN_NAME=#{loginName,jdbcType=VARCHAR}
  	</select>
  	<!-- 用户名验证 -->
  	<select id="validaLoginName" resultType="Integer" parameterType="java.lang.String">
  		SELECT COUNT(*) FROM CUSTOMER_LOGIN WHERE LOGIN_NAME=#{loginName,jdbcType=VARCHAR};
  	</select>
  	<!-- 手机号验证 -->
  	<select id="validaMobilePhone" resultType="Integer" parameterType="java.lang.String">
  		SELECT COUNT(*) FROM CUSTOMER_LOGIN WHERE MOBILE_PHONE=#{mobilePhone,jdbcType=VARCHAR};
  	</select>
  	<!-- 注册用户 -->
  	<insert id="registeredCustomer" parameterType="com.store.clientsoft.customer.entity.CustomerLogin">
  		INSERT INTO CUSTOMER_LOGIN (MOBILE_PHONE, LOGIN_NAME, PASSWORD, MODIFIED_TIME) 
  		VALUES (#{mobilePhone,jdbcType=VARCHAR}, #{loginName,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, #{modifiedTime,jdbcType=TIMESTAMP})
  	</insert>
  
</mapper>